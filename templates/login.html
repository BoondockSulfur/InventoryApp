{% extends 'base.html' %}

{% block content %}
  <style>
    /* volle Höhe unter der Navbar ausnutzen */
    .login-wrapper {
      min-height: calc(100vh - 56px);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    /* linke Spalte: großes Logo */
    .login-logo {
      max-width: 400px;
      width: 100%;
      height: auto;
      object-fit: contain;
    }
    /* kleines Logo unten rechts */
    .bottom-logo {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 100px;
      height: auto;
      opacity: 0.8;
    }
    /* Form-Card etwas abheben */
    .login-card {
      background: rgba(255,255,255,0.9);
      padding: 2rem;
      border-radius: 0.5rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      width: 100%;
    }
    /* Dark-Mode Styles für Login-Seite */
    body.dark-mode .login-card {
      background: rgba(30,30,30,0.8);
      color: #eee;
    }
    body.dark-mode .login-card .form-control {
      background: #444;
      color: #eee;
      border-color: #666;
    }
    body.dark-mode .login-card .form-check-label,
    body.dark-mode .login-card label {
      color: #ddd;
    }
  </style>

  <div class="login-wrapper container">
    <div class="row w-100 gx-5">
      <!-- linke Spalte mit Groß-Logo -->
      <div class="col-md-6 d-flex align-items-center justify-content-center">
        <img src="{{ url_for('static', filename='img/InventoryApp.png') }}"
             alt="InventoryApp Logo" class="login-logo">
      </div>

      <!-- rechte Spalte mit Formular -->
      <div class="col-md-6 d-flex align-items-center justify-content-center">
        <div class="login-card">

          <!-- Dark-Mode Toggle -->
          <div class="form-check form-switch mb-4 text-end">
            <input class="form-check-input" type="checkbox" id="dark-mode-toggle-login">
            <label class="form-check-label" for="dark-mode-toggle-login">
              Dark Mode
            </label>
          </div>

          <h2 class="mb-4">Login</h2>
          <form method="POST" action="{{ url_for('login') }}">
            {{ form.hidden_tag() }}
            <div class="mb-3">
              {{ form.username.label(class="form-label") }}
              {{ form.username(class="form-control", placeholder="Benutzername") }}
            </div>
            <div class="mb-3">
              {{ form.password.label(class="form-label") }}
              {{ form.password(class="form-control", placeholder="Passwort") }}
            </div>
            <div class="d-flex justify-content-between align-items-center">
              {{ form.submit(class="btn btn-primary") }}
              <a href="{{ url_for('reset_request') }}">Passwort vergessen?</a>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- kleines Logo unten rechts -->
    <img src="{{ url_for('static', filename='img/Boondock_Logo.png') }}"
         alt="Logo" class="bottom-logo">
  </div>

  <script>
    // Dark-Mode Toggle nur für diese Seite
    const dmToggle = document.getElementById('dark-mode-toggle-login');
    // Initialzustand aus localStorage übernehmen
    if (localStorage.getItem('darkMode') === 'enabled') {
      document.body.classList.add('dark-mode');
      dmToggle.checked = true;
    }
    dmToggle.addEventListener('change', () => {
      if (dmToggle.checked) {
        document.body.classList.add('dark-mode');
        localStorage.setItem('darkMode', 'enabled');
      } else {
        document.body.classList.remove('dark-mode');
        localStorage.setItem('darkMode', 'disabled');
      }
    });
  </script>
{% endblock %}
